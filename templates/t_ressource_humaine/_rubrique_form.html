<form method="post" action="{% if form.instance.pk %}{% url 't_ressource_humaine:rubrique_update' form.instance.pk %}{% else %}{% url 't_ressource_humaine:rubrique_create' %}{% endif %}" class="ajax-form">
    {% csrf_token %}
    <div class="row g-3">
        <div class="col-md-8">
            <label class="form-label fw-semibold">Libellé</label>
            {{ form.libelle }}
            <div class="text-danger small">{{ form.libelle.errors }}</div>
        </div>
        <div class="col-md-4">
            <label class="form-label fw-semibold">Type de Rubrique</label>
            {{ form.type_rubrique }}
            <div class="text-danger small">{{ form.type_rubrique.errors }}</div>
        </div>
        
        <div class="col-md-6">
            <label class="form-label fw-semibold">Mode de Calcul</label>
            {{ form.mode_calcul }}
            <div class="text-danger small">{{ form.mode_calcul.errors }}</div>
        </div>

        <div class="col-md-6">
             <label class="form-label fw-semibold">Options</label>
             <div class="d-flex flex-wrap gap-3 p-2 border rounded bg-light">
                <div class="form-check form-switch">
                    {{ form.est_cotisable }}
                    <label class="form-check-label" for="{{ form.est_cotisable.auto_id }}">Cotisable (SS)</label>
                </div>
                <div class="form-check form-switch">
                    {{ form.est_imposable }}
                    <label class="form-check-label" for="{{ form.est_imposable.auto_id }}">Imposable (IRG)</label>
                </div>
                <div class="form-check form-switch">
                    {{ form.actif }}
                    <label class="form-check-label" for="{{ form.actif.auto_id }}">Actif</label>
                </div>
             </div>
        </div>

        <div class="col-12 mt-3">
            <label class="form-label fw-semibold d-block">Types de contrats éligibles</label>
            <div class="bg-light p-3 rounded border">
                <div class="row">
                    {% for choice in form.types_contrat %}
                    <div class="col-sm-4">
                        <div class="form-check">
                            {{ choice.tag }}
                            <label class="form-check-label" for="{{ choice.id_for_label }}">
                                {{ choice.choice_label }}
                            </label>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <div class="text-muted small mt-2"><i class="ri-information-line me-1"></i>Laissez vide pour rendre la rubrique disponible pour tous les types de contrats.</div>
            </div>
            <div class="text-danger small">{{ form.types_contrat.errors }}</div>
        </div>
    </div>
    
    <div class="modal-footer px-0 pb-0 mt-4 border-top pt-3">
        <button type="button" class="btn btn-ghost-danger btn-sm" data-bs-dismiss="modal">
            <i class="ri-close-line align-bottom me-1"></i> Annuler
        </button>
        <button type="submit" class="btn btn-primary btn-sm px-4">
            <i class="ri-save-line align-bottom me-1"></i> Enregistrer la Rubrique
        </button>
    </div>
</form>
