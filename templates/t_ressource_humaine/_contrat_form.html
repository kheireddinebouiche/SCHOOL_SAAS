<form method="post" id="contratForm" action=".{% if request.resolver_match.view_name == 'contrat_create' %}?{% endif %}">
    {% csrf_token %}
    <div class="modal-body p-0">
        <!-- Informations Générales -->
        <div class="p-4 bg-light-subtle">
            <h6 class="text-uppercase fw-bold text-primary mb-3 fs-12">
                <i class="ri-information-line me-1"></i> Informations Générales
            </h6>
            <div class="row g-3">
                <div class="col-md-12">
                    <label class="form-label fw-medium mb-1">Formateur <span class="text-danger">*</span></label>
                    <div class="input-group input-group-sm">
                        <span class="input-group-text bg-white"><i class="ri-user-follow-line"></i></span>
                        {{ form.formateur }}
                    </div>
                    {% if form.formateur.errors %}<div class="text-danger fs-12 mt-1">{{ form.formateur.errors|first }}</div>{% endif %}
                </div>
                <div class="col-md-12">
                    <label class="form-label fw-medium mb-1">Type de Contrat <span class="text-danger">*</span></label>
                    <div class="input-group input-group-sm">
                        <span class="input-group-text bg-white"><i class="ri-file-list-3-line"></i></span>
                        {{ form.type_contrat }}
                    </div>
                    {% if form.type_contrat.errors %}<div class="text-danger fs-12 mt-1">{{ form.type_contrat.errors|first }}</div>{% endif %}
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-medium mb-1">Date Début <span class="text-danger">*</span></label>
                    <div class="input-group input-group-sm">
                        <span class="input-group-text bg-white"><i class="ri-calendar-event-line"></i></span>
                        {{ form.date_debut }}
                    </div>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-medium mb-1">Date Fin</label>
                    <div class="input-group input-group-sm">
                        <span class="input-group-text bg-white"><i class="ri-calendar-check-line"></i></span>
                        {{ form.date_fin }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Rémunération -->
        <div class="p-4 border-top border-bottom bg-white">
            <h6 class="text-uppercase fw-bold text-success mb-3 fs-12">
                <i class="ri-money-dollar-circle-line me-1"></i> Rémunération & Primes
            </h6>
            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label fw-medium mb-1">Salaire de Base</label>
                    <div class="input-group input-group-sm">
                        <span class="input-group-text bg-white">DA</span>
                        {{ form.salaire_base }}
                    </div>
                    <div class="form-text fs-11 text-muted">Mensuel</div>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-medium mb-1">Taux Horaire</label>
                    <div class="input-group input-group-sm">
                        <span class="input-group-text bg-white">DA/h</span>
                        {{ form.salaire_horaire }}
                    </div>
                    <div class="form-text fs-11 text-muted">Pour vacations</div>
                </div>
            </div>
            <div class="mt-3">
                <div class="alert alert-info border-0 fs-12 mb-0">
                    <i class="ri-information-line me-1"></i> Les primes et retenues (Panier, Transport, etc.) se gèrent désormais dans la section <strong>"Gérer les Primes"</strong> après la création du contrat.
                </div>
            </div>
        </div>

        <!-- Paramètres -->
        <div class="p-4 bg-light-subtle">
            <h6 class="text-uppercase fw-bold text-secondary mb-3 fs-12">
                <i class="ri-settings-4-line me-1"></i> Paramètres
            </h6>
            <div class="row g-3">
                <div class="col-12">
                    <div class="form-check form-switch form-switch-md">
                        {{ form.actif }}
                        <label class="form-check-label fw-bold ms-2" for="{{ form.actif.id_for_label }}">
                            Contrat Actif
                        </label>
                    </div>
                    <p class="text-muted fs-11 mb-0 mt-1 ms-4 pl-2">
                        Un contrat inactif ne pourra pas être utilisé pour générer une fiche de paie.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer bg-light p-3">
        <button type="button" class="btn btn-ghost-danger btn-sm" data-bs-dismiss="modal">
            <i class="ri-close-line align-bottom me-1"></i> Annuler
        </button>
        <button type="submit" class="btn btn-primary btn-sm px-4 shadow-sm">
            <i class="ri-save-fill align-bottom me-1"></i> Enregistrer le contrat
        </button>
    </div>
</form>
