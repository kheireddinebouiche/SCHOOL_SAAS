
<!-- Modal Nouveau Prospect (Copied from nouveau-devis.html) -->
<div class="modal fade" id="newProspectModal" tabindex="-1" aria-hidden="true" style="z-index: 1060;"> <!-- Higher z-index to sit on top of Opp modal -->
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg" style="border-radius: 16px; overflow: hidden;">
            <div class="modal-header text-white" style="background: linear-gradient(135deg, #3b7ddd 0%, #326bc9 100%); border-bottom: none; padding: 20px 24px;">
                <h5 class="modal-title fs-16">
                    <i class="ri-user-add-line me-2 align-middle"></i>Ajouter un Prospect
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" style="filter: brightness(0) invert(1);"></button>
            </div>
            <div class="modal-body p-4">
                <form id="quickProspectForm">
                    
                    <div class="d-flex mb-3" style="background-color: #f3f6f9; padding: 5px; border-radius: 8px;">
                        <label class="flex-grow-1 text-center p-2 rounded" style="cursor: pointer; transition: all 0.2s;" id="labelParticulier">
                            <input type="radio" class="d-none check-type" name="type_prospect" value="particulier" checked onchange="toggleProspectType(this.value)">
                            <span style="font-weight: 500; font-size: 13px;">Particulier</span>
                        </label>
                        <label class="flex-grow-1 text-center p-2 rounded" style="cursor: pointer; transition: all 0.2s;" id="labelEntreprise">
                            <input type="radio" class="d-none check-type" name="type_prospect" value="entreprise" onchange="toggleProspectType(this.value)">
                            <span style="font-weight: 500; font-size: 13px;">Entreprise</span>
                        </label>
                    </div>

                    <div class="row g-3 mb-3">
                        <div class="col-md-6">
                            <label class="form-label small text-muted">Nom <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="prospectNom" name="nom" required placeholder="Nom">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label small text-muted">Prénom</label>
                            <input type="text" class="form-control" id="prospectPrenom" name="prenom" placeholder="Prénom">
                        </div>
                    </div>
                    
                    <div id="entrepriseFields" class="d-none">
                        <div class="mb-3">
                            <label class="form-label small text-muted">Entreprise <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="prospectEntreprise" name="entreprise" placeholder="Nom de l'entreprise">
                        </div>
                        <div class="mb-3">
                            <label class="form-label small text-muted">Poste</label>
                            <input type="text" class="form-control" id="prospectPoste" name="poste" placeholder="Poste occupé">
                        </div>
                    </div>

                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label small text-muted">Email</label>
                                <input type="email" class="form-control" id="prospectEmail" name="email" placeholder="exemple@mail.com">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label small text-muted">Téléphone <span class="text-danger">*</span></label>
                                <input type="tel" class="form-control" id="prospectTelephone" name="telephone" required placeholder="05XXXXXXXX">
                            </div>
                        </div>
                    </div>
                </form>
                
                <div id="prospectError" class="alert alert-danger d-none mt-3 fs-13">
                    <i class="ri-error-warning-fill me-1 align-middle"></i> <span id="errorText"></span>
                </div>

            </div>
            <div class="modal-footer border-0 p-4 pt-0">
                <button type="button" class="btn btn-light fw-medium" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-primary fw-medium" id="saveProspectBtn" onclick="submitNewProspect()">Enregistrer</button>
            </div>
        </div>
    </div>
</div>

<style>
    #labelParticulier input:checked + span { color: #3b7ddd; font-weight: 700; }
    #labelParticulier:has(input:checked) { background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    #labelEntreprise input:checked + span { color: #3b7ddd; font-weight: 700; }
    #labelEntreprise:has(input:checked) { background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
</style>
