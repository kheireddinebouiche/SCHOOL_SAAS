{% extends 'tenant_folder/base.html' %}
{% load static %}
{% block title %} Formations - Détails de la formation {% endblock title %}

{% block content %}
<style>
    ._inputDetails {
       background-color: transparent !important;
       border : none !important;
       outline : none;
       font-weight : 700 !important;
    }
</style>
<script src="https://cdn.lordicon.com/lordicon.js"></script>
        <!-- ============================================================== -->
        <!-- Start right Content here -->
        <!-- ============================================================== -->
        <div class="main-content">

            <div class="page-content">
                <div class="container-fluid">
                    
                    <!-- start page title -->
                    <div class="row mb-3">
                        <div class="col-12">
                            <div class="d-sm-flex align-items-center justify-content-between bg-white rounded-lg shadow-sm p-3">
                                <div class="d-flex align-items-center">
                                    <div class="bg-primary bg-opacity-10 rounded-circle p-2 me-2">
                                        <i class="ri-graduation-cap-line text-primary"></i>
                                    </div>
                                    <h4 class="mb-0 text-primary">Détails de la formation</h4>
                                </div>
                                <div class="d-flex align-items-center gap-3">
                                    <nav aria-label="breadcrumb">
                                        <ol class="breadcrumb m-0 bg-transparent">
                                            <li class="breadcrumb-item">
                                                <a href="javascript: void(0);">Formations</a>
                                            </li>
                                            <li class="breadcrumb-item active">Détails de la formation</li>
                                        </ol>
                                    </nav>
                                    <a href="{% url 't_formations:updateFormation' pk=formation.id %}" class="btn btn-primary px-4 py-2">
                                        <i class="ri-edit-line me-2"></i>Modifier
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end page title -->

                    <div class="alert-content mb-4">
                        
                    </div>

                    <div class="row">
                        <div class="col-lg-8">
                            <div class="card border-0 shadow-sm rounded-4 h-100">
                                <div class="card-header border-0 bg-primary bg-opacity-10 px-4 py-3">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="d-flex align-items-center">
                                            <div class="modal-icon bg-primary bg-opacity-10 rounded-3 p-3 me-3">
                                                <i class="ri-graduation-cap-line text-primary fs-4"></i>
                                            </div>
                                            <div>
                                                <h5 class="card-title fw-semibold text-primary mb-1">{{formation.nom}}</h5>
                                                <p class="text-muted small mb-0">Informations détaillées sur la formation</p>
                                            </div>
                                        </div>
                                        {% if request.tenant.tenant_type != 'second' and formation.type_formation == "etrangere" %}
                                            <div class="d-flex gap-2">
                                                <button type="button" id="syncBtn" class="btn btn-primary px-4 py-2" title="Synchroniser les formations avec l'ensemble des instituts">
                                                    <i class='ri-sync-line me-2'></i>Synchroniser
                                                </button>da
                                                <div id="update-btn-content">
                                                    <button class="btn btn-success px-4 py-2" id="effectuerMiseAjour">
                                                        <i class="ri-refresh-line me-2"></i>Mise à jour
                                                    </button>
                                                </div>   
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="card-body p-4">
                                    <div class="row g-4">
                                        <div class="col-lg-4">
                                            <div class="d-flex align-items-start">
                                                <div class="icon-circle bg-primary bg-opacity-10 rounded-circle p-2 me-3">
                                                    <i class="ri-book-line text-primary"></i>
                                                </div>
                                                <div>
                                                    <small class="text-muted d-block mb-1">Nom de la formation</small>
                                                    <span class="fw-semibold">{{formation.nom}}</span>
                                                </div>
                                            </div>
                                        </div> 
                                        <div class="col-lg-4">
                                            <div class="d-flex align-items-start">
                                                <div class="icon-circle bg-info bg-opacity-10 rounded-circle p-2 me-3">
                                                    <i class="ri-stack-line text-info"></i>
                                                </div>
                                                <div>
                                                    <small class="text-muted d-block mb-1">Type de formation</small>
                                                    <span class="fw-semibold">{{formation.get_type_formation_display}}</span>
                                                </div>
                                            </div>
                                        </div>   
                                        <div class="col-lg-4">
                                            <div class="d-flex align-items-start">
                                                <div class="icon-circle bg-success bg-opacity-10 rounded-circle p-2 me-3">
                                                    <i class="ri-handshake-line text-success"></i>
                                                </div>
                                                <div>
                                                    <small class="text-muted d-block mb-1">Partenaire</small>
                                                    <span class="fw-semibold">{{formation.partenaire|default:"-"}}</span>
                                                </div>
                                            </div>
                                        </div>                                  
                                    </div>
                                    <hr class="my-4">
                                    <div class="row g-4">
                                        <div class="col-lg-4">
                                            <div class="d-flex align-items-start">
                                                <div class="icon-circle bg-warning bg-opacity-10 rounded-circle p-2 me-3">
                                                    <i class="ri-money-dollar-circle-line text-warning"></i>
                                                </div>
                                                <div>
                                                    <small class="text-muted d-block mb-1">Frais de dossier</small>
                                                    <span class="fw-semibold">{{formation.frais_inscription|default:"0"}} DA</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="d-flex align-items-start">
                                                <div class="icon-circle bg-danger bg-opacity-10 rounded-circle p-2 me-3">
                                                    <i class="ri-shield-star-line text-danger"></i>
                                                </div>
                                                <div>
                                                    <small class="text-muted d-block mb-1">Frais d'assurance</small>
                                                    <span class="fw-semibold">{{formation.frais_assurance|default:"0"}} DA</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="d-flex align-items-start">
                                                <div class="icon-circle bg-secondary bg-opacity-10 rounded-circle p-2 me-3">
                                                    <i class="ri-timer-line text-secondary"></i>
                                                </div>
                                                <div>
                                                    <small class="text-muted d-block mb-1">Durée de la formation</small>
                                                    <span class="fw-semibold">{{formation.duree|default:"0"}} Mois</span>
                                                </div>
                                            </div>
                                        </div> 
                                    </div>
                
                                </div>
                                <div class="card-footer border-0 bg-light px-4 py-3">
                                    <div class="d-flex justify-content-end">
                                        <a href="{% url 't_formations:updateFormation' pk=formation.id %}" class="btn btn-primary px-4 py-2 me-2">
                                            <i class="ri-edit-line me-2"></i>Modifier
                                        </a>
                                        <a href="#" class="btn btn-danger px-4 py-2">
                                            <i class="ri-delete-bin-line me-2"></i>Supprimer
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card border-0 shadow-sm rounded-4 h-100">
                                <div class="card-header border-0 bg-info bg-opacity-10 px-4 py-3">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="d-flex align-items-center">
                                            <div class="modal-icon bg-info bg-opacity-10 rounded-3 p-3 me-3">
                                                <i class="ri-folder-line text-info fs-4"></i>
                                            </div>
                                            <div>
                                                <h5 class="card-title fw-semibold text-info mb-1">Dossier d'inscription</h5>
                                                <p class="text-muted small mb-0">Documents requis pour l'inscription</p>
                                            </div>
                                        </div>
                                        <button class="btn btn-info btn-sm" data-bs-toggle="modal" data-bs-target="#configDossierModal">
                                            <i class="ri-settings-3-line me-1"></i>Configurer
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body p-4">
                                    <div id="listeDossiers">
                                        <!-- Liste des dossiers sera chargée ici -->
                                        <div class="text-center py-5">
                                            <div class="avatar-lg mx-auto mb-4">
                                                <div class="avatar-title bg-light text-muted display-5 rounded-circle">
                                                    <i class="ri-file-list-line"></i>
                                                </div>
                                            </div>
                                            <h5 class="mb-3">Aucun document requis</h5>
                                            <p class="text-muted mb-4">Aucun document n'a été configuré pour cette formation.</p>
                                            <button class="btn btn-soft-info px-4 py-2" data-bs-toggle="modal" data-bs-target="#configDossierModal">
                                                <i class="ri-settings-3-line me-2"></i>Configurer le dossier
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="card border-0 shadow-sm rounded-4">
                            <div class="card-header border-0 bg-success bg-opacity-10 px-4 py-3">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                        <div class="modal-icon bg-success bg-opacity-10 rounded-3 p-3 me-3">
                                            <i class="ri-bookmark-line text-success fs-4"></i>
                                        </div>
                                        <div>
                                            <h5 class="card-title fw-semibold text-success mb-1">Liste des spécialités</h5>
                                            <p class="text-muted small mb-0">Spécialités associées à cette formation</p>
                                        </div>
                                    </div>
                                    <button class="btn btn-success px-4 py-2">
                                        <i class="ri-add-line me-2"></i>Ajouter une spécialité
                                    </button>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <div class="table-responsive">
                                    <table id="example" class="table table-hover align-middle" style="width:100%">
                                        <thead class="bg-light">
                                            <tr>
                                                <th class="border-0 rounded-start">Code</th>
                                                <th class="border-0">Label</th>
                                                <th class="border-0 rounded-end text-end">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% if specialite.count != 0 %}
                                                {% for i in specialite %}
                                                    <tr>
                                                        <td><span class="fw-semibold">{{i.code}}</span></td>
                                                        <td><span class="fw-medium">{{i.label}}</span></td>
                                                        <td class="text-end">
                                                            <div class="d-flex justify-content-end gap-2">
                                                                <a href="{% url 't_formations:detailSpecialite' pk=i.id %}" class="btn btn-soft-info btn-sm" title="Consulter">
                                                                    <i class="ri-eye-line"></i>
                                                                </a>
                                                                <a href="#" class="btn btn-soft-primary btn-sm edit-item-btn" title="Modifier">
                                                                    <i class="ri-edit-line"></i>
                                                                </a>
                                                                <a class="btn btn-soft-danger btn-sm remove-item-btn" title="Supprimer">
                                                                    <i class="ri-delete-bin-line"></i>
                                                                </a>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                            {% else %}
                                                <tr>
                                                    <td colspan="3" class="text-center py-5">
                                                        <div class="avatar-lg mx-auto mb-4">
                                                            <div class="avatar-title bg-light text-muted display-5 rounded-circle">
                                                                <i class="ri-bookmark-line"></i>
                                                            </div>
                                                        </div>
                                                        <h5 class="mb-3">Aucune spécialité trouvée</h5>
                                                        <p class="text-muted">Cette formation n'a pas encore de spécialités associées.</p>
                                                        <button class="btn btn-soft-success px-4 py-2">
                                                            <i class="ri-add-line me-2"></i>Ajouter une spécialité
                                                        </button>
                                                    </td>
                                                </tr>
                                            {% endif %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- container-fluid -->
            </div>
            <!-- End Page-content -->
        </div>

        <div id="showSyncState" class="modal fade" tabindex="-1" aria-labelledby="showSyncStateLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content rounded-4 shadow-lg border-0">
                    <div class="modal-header border-0 bg-primary bg-opacity-10 px-4 py-3">
                        <div class="d-flex align-items-center">
                            <div class="modal-icon bg-primary bg-opacity-10 rounded-3 p-3 me-3">
                                <i class="ri-sync-line text-primary fs-4"></i>
                            </div>
                            <div>
                                <h5 class="modal-title fw-semibold text-primary mb-1" id="showSyncStateLabel">État de synchronisation des formations</h5>
                                <p class="text-muted small mb-0">Synchronisation avec les instituts partenaires</p>
                            </div>
                        </div>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body p-4">
                        <div class="table-responsive">
                            <table class="table table-hover align-middle mb-0" id="datatable">
                                <thead class="bg-light">
                                    <tr>
                                        <th class="border-0 rounded-start">Nom de l'institut</th>
                                        <th class="border-0 rounded-end">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="listeItem">
                                    
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer border-0 bg-light px-4 py-3">
                        <button type="button" class="btn btn-light px-4 py-2" data-bs-dismiss="modal">
                            <i class="ri-close-line me-2"></i>Fermer
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade alertModal" tabindex="-1" role="dialog" aria-labelledby="alertModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content rounded-4 shadow-lg border-0">
                    <div class="modal-body text-center p-5">
                        <lord-icon
                            src="https://cdn.lordicon.com/lltgvngb.json"
                            trigger="loop"
                            colors="primary:#e88c30,secondary:#e88c30"
                            style="width:120px;height:120px">
                        </lord-icon>
                        
                        <div class="mt-4">
                           <div id="alert-modal-content"></div>
                        </div>
                        <div class="hstack gap-2 justify-content-center mt-4">
                            <button type="button" class="btn btn-warning px-4 py-2" data-bs-dismiss="modal">
                                <i class="ri-close-line me-2"></i>Fermer
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Configuration Dossier d'Inscription -->
        <div class="modal fade" id="configDossierModal" tabindex="-1" aria-labelledby="configDossierModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content rounded-4 shadow-lg border-0">
                    <div class="modal-header border-0 bg-info bg-opacity-10 px-4 py-3">
                        <div class="d-flex align-items-center">
                            <div class="modal-icon bg-info bg-opacity-10 rounded-3 p-3 me-3">
                                <i class="ri-folder-settings-line text-info fs-4"></i>
                            </div>
                            <div>
                                <h5 class="modal-title fw-semibold text-info mb-1" id="configDossierModalLabel">Configuration du dossier d'inscription</h5>
                                <p class="text-muted small mb-0">Gestion des documents requis pour l'inscription</p>
                            </div>
                        </div>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body p-4">
                        <div class="row mb-4">
                            <div class="col-12">
                                <div class="d-flex align-items-center">
                                    <input type="text" class="form-control border-0 bg-light me-2" id="nomDocument" placeholder="Nom du document">
                                    <button class="btn btn-primary" id="ajouterDocument">
                                        <i class="ri-add-line me-1"></i>Ajouter
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead class="bg-light">
                                    <tr>
                                        <th class="border-0 rounded-start">Document</th>
                                        <th class="border-0 rounded-end text-end">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="listeDocumentsConfig">
                                    <!-- Liste des documents configurés -->
                                    <tr>
                                        <td colspan="2" class="text-center text-muted py-4">
                                            <i class="ri-file-list-line fs-1 d-block mb-2"></i>
                                            Aucun document configuré
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer border-0 bg-light px-4 py-3">
                        <button type="button" class="btn btn-light px-4 py-2" data-bs-dismiss="modal">
                            <i class="ri-close-line me-2"></i>Annuler
                        </button>
                        <button type="button" class="btn btn-info px-4 py-2" id="enregistrerDossierBtn">
                            <i class="ri-save-line me-2"></i>Enregistrer
                        </button>
                    </div>
                </div>
            </div>
        </div>

<script>
    $(document).ready(function(){

        var code_formation = "{{formation.code}}";

        function loadSyncState(){
            $.ajax({
                url : "{% url 't_formations:ApigetFormationSync' %}",
                dataType: "JSON",
                type : 'GET',
                data : {'code_formation' : code_formation},
                success : function(data){
                    $('#listeItem').empty();
                    $.each(data, function(index, item) {
                        var row = '<tr>' +
                            '<td><span class="fw-semibold">' + item.schema_name + '</span></td>' +
                            '<td>' +(item.has_partenaire ? (item.has_formation 
                                ? '<button class="btn btn-success px-3 py-1" disabled><i class="ri-check-line me-1"></i>Déjà lié</button>'
                                : '<button id="synBTN" class="btn btn-primary px-3 py-1" data-name='+item.schema_name+'><i class="ri-link-line me-1"></i>Synchroniser</button>') : '<span class="text-muted">Veuillez synchroniser le partenaire d\'abord</span>')+
                            '</td>' +
                        '</tr>';
                        $('#listeItem').append(row);
                    });
                }
            })
        }

        $(document).on('click','#syncBtn',function(e){
            $.ajax({
                url : "{% url 't_formations:ApiCheckIfFormationCompleted' %}",
                dataType: "JSON",
                type : 'GET',
                data : {'code_formation' : code_formation},
                success: function(response){
                    if(!response.completed){
                        $('#showSyncState').modal('hide');
                        $('#alert-modal-content').html(response.reason);
                        $('.alertModal').modal('show');
                    }else{
                        loadSyncState();
                        $('#showSyncState').modal('show');
                    }
                },
            });        
        });

        $(document).on('click','#synBTN', function(){
            var schema = $(this).data('name');
            $.ajax({
                url :"{% url 't_formations:ApiSyncFormation' %}",
                dataType: "JSON",
                type : 'POST',
                data : {'code_formation' : code_formation, 'schema_name' : schema,'csrfmiddlewaretoken': '{{ csrf_token }}'},
                success: function(response){
                    if (response.status){
                        alertify.success(response.message);
                        loadSyncState();
                    }else{
                        alertify.error(response.message);
                    }                   
                },
            });
        });

        $(document).on('click','#effectuerMiseAjour',function(){
            $.ajax({
                url :"{% url 't_formations:ApiSyncUpdateFormation' %}",
                dataType: "JSON",
                type : 'POST',
                data : {'code_formation' : code_formation,'csrfmiddlewaretoken': '{{ csrf_token }}'},
                success: function(response){
                    if (response.status){
                        alertify.success(response.message);
                        afficheBtnUpdat();
                    }else{
                        alertify.error(response.message);
                    }                   
                },
            });
        });

        function afficheBtnUpdat(){
            $.ajax({
                url :"{% url 't_formations:ApiCheckFormationState' %}",
                dataType: "JSON",
                type : 'GET',
                data : {'code_formation' : code_formation},
                success: function(response){
                    if(!response.status){
                        $('#update-btn-content').hide();
                    }else{
                        $('#update-btn-content').show();

                        $('.alert-content').html(
                           '<div class="alert alert-warning d-flex align-items-center shadow-sm rounded-3 p-3" role="alert">'+
                                '<div class="flex-shrink-0 me-3">'+
                                '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">'+
                                    '<path d="M8.982 1.566a1.5 1.5 0 0 0-2.964 0L.165 13.233c-.457.778.091 1.767.982 1.767h13.707c.89 0 1.438-.99.982-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1-2.002 0 1 1 0 0 1 2.002 0z"/>'+
                                '</svg>'+
                                '</div>'+
                                '<div>'+
                                '<strong>Attention :</strong> Des modifications ont été apportées, veuillez synchroniser toutes les données avec les instituts'+
                                '</div>'+
                            '</div>'
                        );
                    }
                },
            })
        }

        afficheBtnUpdat();

        // Gestion de la configuration du dossier d'inscription
        var documentsConfig = [];

        function afficherListeDocuments() {
            var html = '';
            if (documentsConfig.length > 0) {
                html += '<div class="vstack gap-3">';
                $.each(documentsConfig, function(index, doc) {
                    html += '<div class="d-flex justify-content-between align-items-center bg-light rounded-3 p-3">';
                    html += '<div class="d-flex align-items-center">';
                    html += '<div class="icon-circle bg-info bg-opacity-10 rounded-circle p-2 me-3">';
                    html += '<i class="ri-file-line text-info"></i>';
                    html += '</div>';
                    html += '<span class="fw-medium">' + doc.nom + '</span>';
                    html += '</div>';
                    html += '<button class="btn btn-soft-danger btn-sm remove-doc" data-index="' + index + '">';
                    html += '<i class="ri-delete-bin-line"></i>';
                    html += '</button>';
                    html += '</div>';
                });
                html += '</div>';
            } else {
                html += '<div class="text-center py-5">';
                html += '<div class="avatar-lg mx-auto mb-4">';
                html += '<div class="avatar-title bg-light text-muted display-5 rounded-circle">';
                html += '<i class="ri-file-list-line"></i>';
                html += '</div>';
                html += '</div>';
                html += '<h5 class="mb-3">Aucun document requis</h5>';
                html += '<p class="text-muted mb-4">Aucun document n\'a été configuré pour cette formation.</p>';
                html += '<button class="btn btn-soft-info px-4 py-2" data-bs-toggle="modal" data-bs-target="#configDossierModal">';
                html += '<i class="ri-settings-3-line me-2"></i>Configurer le dossier';
                html += '</button>';
                html += '</div>';
            }
            $('#listeDossiers').html(html);
        }

        $(document).on('click', '#ajouterDocument', function() {
            var nomDoc = $('#nomDocument').val();
            if (nomDoc.trim() !== '') {
                documentsConfig.push({nom: nomDoc});
                $('#nomDocument').val('');
                mettreAJourListeDocumentsConfig();
            }
        });

        function mettreAJourListeDocumentsConfig() {
            var html = '';
            if (documentsConfig.length > 0) {
                $.each(documentsConfig, function(index, doc) {
                    html += '<tr>';
                    html += '<td>';
                    html += '<div class="d-flex align-items-center">';
                    html += '<div class="icon-circle bg-info bg-opacity-10 rounded-circle p-2 me-3">';
                    html += '<i class="ri-file-line text-info"></i>';
                    html += '</div>';
                    html += '<span class="fw-medium">' + doc.nom + '</span>';
                    html += '</div>';
                    html += '</td>';
                    html += '<td class="text-end">';
                    html += '<button class="btn btn-soft-danger btn-sm remove-doc-config" data-index="' + index + '">';
                    html += '<i class="ri-delete-bin-line"></i>';
                    html += '</button>';
                    html += '</td>';
                    html += '</tr>';
                });
            } else {
                html += '<tr>';
                html += '<td colspan="2" class="text-center text-muted py-4">';
                html += '<i class="ri-file-list-line fs-1 d-block mb-2"></i>';
                html += 'Aucun document configuré';
                html += '</td>';
                html += '</tr>';
            }
            $('#listeDocumentsConfig').html(html);
        }

        $(document).on('click', '.remove-doc-config', function() {
            var index = $(this).data('index');
            documentsConfig.splice(index, 1);
            mettreAJourListeDocumentsConfig();
        });

        $(document).on('click', '.remove-doc', function() {
            var index = $(this).data('index');
            documentsConfig.splice(index, 1);
            afficherListeDocuments();
            mettreAJourListeDocumentsConfig();
        });

        $(document).on('click', '#enregistrerDossierBtn', function() {
            
            // Pour l'instant, on ferme simplement la modale
            $('#configDossierModal').modal('hide');
            afficherListeDocuments();
           
        });

        // Initialisation de l'affichage
        afficherListeDocuments();
    });
</script>
{% endblock content %}
           



    