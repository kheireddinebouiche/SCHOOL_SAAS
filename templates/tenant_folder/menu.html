{% load static %}
<style>
    /* Réduction de la taille de la police des menus */
    .app-menu .nav-link span,
    .app-menu .submenu-header h6,
    .app-menu .submenu-header small,
    .app-menu .submenu-item a span {
        font-size: 0.8rem !important;
    }
    
    /* Réduction de la taille des titres de section */
    .app-menu .menu-title span {
        font-size: 0.85rem !important;
    }
    
    /* Ajustement des paddings pour compenser la réduction de taille */
    .app-menu .nav-link {
        padding: 0.25rem 0.75rem !important;
    }
    
    .app-menu .submenu-header {
        padding: 0.2rem 0.4rem !important;
    }
    
    .app-menu .submenu-item a {
        padding: 0.15rem 0.4rem !important;
    }
    
    /* Styles spécifiques pour les sous-menus */
    .app-menu .submenu-content .submenu-item a {
        font-size: 0.75rem !important;
        padding: 0.1rem 0.3rem !important;
    }
    
    .app-menu .submenu-content .submenu-item a i {
        font-size: 0.7rem !important;
    }
    
    /* Ensure icons in nested submenu headers are visible */
    .app-menu .submenu-content .submenu-header .submenu-icon i {
        font-size: 0.8rem !important;
        display: inline-block !important;
    }
    
    .app-menu .submenu-content h6 {
        font-size: 0.75rem !important;
    }
    
    .app-menu .submenu-content small {
        font-size: 0.65rem !important;
    }
    
    /* Réduction de l'espacement des sous-menus */
    .submenu-container {
        padding: 0.1rem 0.2rem !important;
    }
    
    .submenu-section {
        margin-bottom: 0.2rem !important;
        padding: 0.1rem !important;
    }
    
    .submenu-item {
        margin-bottom: 0.1rem !important;
    }
    
    /* Ajout d'espace entre les menus principaux et trait en dessous */
    .nav-item {
        margin-bottom: 0.5rem !important;
        border-bottom: 1px solid #e9ecef !important;
        padding-bottom: 0.5rem !important;
    }
    
    /* Ajustement pour le dernier élément sans bordure */
    .nav-item:last-child {
        border-bottom: none !important;
    }
    
    /* Style pour le menu principal actif avec opacité faible */
    .nav-item.active > .nav-link {
        background-color: rgba(59, 125, 221, 0.2) !important;
        color: #3b7ddd !important;
        font-weight: bold !important;
    }
    
    /* Style pour les liens de sous-menu actifs avec opacité faible */
    .nav-link.active {
        background-color: rgba(59, 125, 221, 0.2) !important;
        color: #3b7ddd !important;
        font-weight: bold !important;
    }
    
    /* Style pour les liens de sous-menu au survol avec opacité faible */
    .nav-link:hover:not(.active) {
        background-color: rgba(59, 125, 221, 0.1) !important;
        color: #3b7ddd !important;
    }
    
    /* Style pour les en-têtes de sous-menu au survol avec opacité faible */
    .submenu-header:hover {
        background-color: rgba(59, 125, 221, 0.1) !important;
        color: #3b7ddd !important;
    }
    
    /* Style pour les éléments de sous-menu au survol avec opacité faible */
    .submenu-item:hover {
        background-color: rgba(59, 125, 221, 0.05) !important;
    }
    
    /* Assurer la visibilité du texte dans les badges */
    .status-badge {
        color: #fff !important;
        font-weight: 500 !important;
    }
    
    /* Style pour les badges d'information avec opacité faible */
    .badge.bg-primary {
        background-color: rgba(59, 125, 221, 0.8) !important;
    }
    
    .badge.bg-success {
        background-color: rgba(40, 167, 69, 0.8) !important;
    }
    
    .badge.bg-warning {
        background-color: rgba(255, 193, 7, 0.8) !important;
        color: #212529 !important;
    }
    
    .badge.bg-danger {
        background-color: rgba(220, 53, 69, 0.8) !important;
    }
    
    .badge.bg-info {
        background-color: rgba(23, 162, 184, 0.8) !important;
    }
</style>

<!-- ========== App Menu ========== -->
<div class="app-menu navbar-menu">
    <!-- LOGO -->
    <div class="navbar-brand-box">
        <!-- Dark Logo-->
        <a href="{% url 'institut_app:index' %}" class="logo logo-dark">
            <span class="logo-sm">
                <img src="{% static 'images/insim-logo.png' %}" alt="" height="50">
            </span>
            <span class="logo-lg">
                <img src="{% static 'images/insim-logo.png' %}" alt="" height="70">
            </span>
        </a>
        <!-- Light Logo-->
        <a href="{% url 'institut_app:index' %}" class="logo logo-light">
            <span class="logo-sm">
                <img src="{% static 'images/insim-logo.png' %}" alt="" height="50">
            </span>
            <span class="logo-lg">
                <img src="{% static 'images/insim-logo.png' %}" alt="" height="70">
            </span>
        </a>
        <button type="button" class="btn btn-sm p-0 fs-20 header-item float-end btn-vertical-sm-hover" id="vertical-hover">
            <i class="ri-record-circle-line"></i>
        </button>
    </div>

    <div id="scrollbar">
        <div class="container-fluid px-0">

            <div id="two-column-menu">
            </div>
            <ul class="navbar-nav" id="navbar-nav">
                <li class="menu-title"><span data-key="t-menu">Menu Principal</span></li>              

                <!-- CRM -->
                <li class="nav-item {% if request.resolver_match.url_name in 'ListeRemiseApplique prospects_incomplets_view DetailsProspect liste_derogations DetailsPrinscrit ListeDesPrinscrits  ListeDesProspects inscription_entreprise inscription_particulier ListeDemandeInscription updateVisiteur nouveau_visiteur liste_visiteurs details_visiteur' %}active{% endif %}">
                    <a class="nav-link menu-link rounded-2 mx-2 mb-1" href="#sidebarCRM" data-bs-toggle="collapse" role="button" 
                    aria-expanded="{% if request.resolver_match.url_name in 'prospects_incomplets_view ListeRemiseApplique DetailsProspect liste_derogations DetailsPrinscrit ListeDesPrinscrits  ListeDesProspects inscription_entreprise inscription_particulier ListeDemandeInscription updateVisiteur nouveau_visiteur liste_visiteurs details_visiteur' %}true{% else %}false{% endif %}" aria-controls="sidebarCRM">
                        <i class="bx bx-user-check fs-5"></i> <span class="ms-1">Relation Client</span>
                    </a>
                    <div class="collapse menu-dropdown {% if request.resolver_match.url_name in 'ListeRemiseApplique DetailsProspect liste_derogations prospects_incomplets_view DetailsPrinscrit ListeDesPrinscrits ListeDesProspects inscription_entreprise inscription_particulier ListeDemandeInscription updateVisiteur nouveau_visiteur liste_visiteurs details_visiteur' %}show{% endif %}" id="sidebarCRM">
                        <div class="submenu-container">
                            <div class="row g-1">
                                <div class="col-12">
                                    <a href="#sidebarProspects" class="submenu-header d-flex align-items-center justify-content-between rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center py-2 px-2">
                                            <div class="submenu-icon bg-primary bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-user-plus text-primary"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Gestion des Prospects</h6>
                                                <small class="text-muted">Création et suivi</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow me-2"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'ListeDesProspects inscription_particulier inscription_entreprise' %}show{% endif %}" id="sidebarProspects">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mx-2 mb-1">
                                            <a href="{% url 't_crm:inscription_particulier' %}" class="nav-link {% if request.resolver_match.url_name == 'inscription_particulier' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-user me-1"></i>
                                                <span>Ajouter un particulier</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mx-2 mb-1">
                                            <a href="{% url 't_crm:inscription_entreprise' %}" class="nav-link {% if request.resolver_match.url_name == 'inscription_entreprise' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-building me-1"></i>
                                                <span>Ajouter une entreprise</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mx-2 mb-1">
                                            <a href="{% url 't_crm:ListeDesProspects' %}" class="nav-link {% if request.resolver_match.url_name in 'ListeDesProspects DetailsProspect' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Voir tous les prospects</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                 <div class="col-12">
                                    <a href="#sirebareprinscrit" class="submenu-header d-flex align-items-center justify-content-between rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center py-2 px-2">
                                            <div class="submenu-icon bg-primary bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-user-plus text-primary"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Gestion des Préinscrits</h6>
                                                <small class="text-muted">Suivi</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow me-2"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'liste_derogations DetailsPrinscrit ListeDesPrinscrits prospects_incomplets_view' %}show{% endif %}" id="sirebareprinscrit">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mx-2 mb-1">
                                            <a href="{% url 't_crm:ListeDesPrinscrits' %}" class="nav-link {% if request.resolver_match.url_name == 'ListeDesPrinscrits' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-user me-1"></i>
                                                <span>Liste des préinscrits</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mx-2 mb-1">
                                            <a href="{% url 't_crm:prospects_incomplets_view' %}" class="nav-link {% if request.resolver_match.url_name == 'prospects_incomplets_view' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-folder me-1"></i>
                                                <span>Dossiers incomplets</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mx-2 mb-1">
                                            <a href="{% url 't_crm:liste_derogations' %}" class="nav-link {% if request.resolver_match.url_name == 'liste_derogations' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-error me-1"></i>
                                                <span>Dérogations d'inscription</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Menu Remises dans CRM -->
                                <div class="col-12 mt-2">
                                    <a href="#sidebarRemises" class="submenu-header d-flex align-items-center justify-content-between rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center py-2 px-2">
                                            <div class="submenu-icon bg-info  bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-gift text-info"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Remises</h6>
                                                <small class="text-muted">Gestion des réductions</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow me-2"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'ListeRemiseApplique ListeRemise' %}show{% endif %}" id="sidebarRemises">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mx-2 mb-1">
                                            <a href='{% url "t_crm:ListeRemiseApplique" %}' class="nav-link {% if request.resolver_match.url_name == 'ListeRemiseApplique' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-check me-1"></i>
                                                <span>Remises appliquées</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <!-- Fin Menu Remises dans CRM -->
                            </div>
                        </div>
                    </div>
                </li>
                <!-- CRM -->

                <!-- Formation -->
                <li class="nav-item {% if request.resolver_match.url_name in 'detailsPartenaire PageListeModules listPromos AddPromo archiveModule listFormations addFormation listPartenaires addPartenaire detailFormation addSpecialite detailSpecialite listSpecialites updateSpecialite' %}active{% endif %}">
                    <a class="nav-link menu-link rounded-2 mx-2 mb-1" href="#sidebarFormation" data-bs-toggle="collapse" role="button" 
                    aria-expanded="{% if request.resolver_match.url_name in 'detailsPartenaire PageListeModules listPromos AddPromo archiveModule listFormations addFormation listPartenaires addPartenaire addSpecialite detailFormation detailSpecialite listSpecialites updateSpecialite' %}true{% else %}false{% endif %}" 
                    aria-controls="sidebarFormation">
                    <i class='bx bxs-graduation fs-5'></i> <span data-key="t-authentication" class="ms-1">Formation</span>
                    </a>
                    <div class="collapse menu-dropdown {% if request.resolver_match.url_name in 'detailsPartenaire PageListeModules listPromos AddPromo archiveModule listFormations addFormation listPartenaires addPartenaire addSpecialite detailFormation detailSpecialite listSpecialites updateSpecialite' %}show{% endif %}" id="sidebarFormation">
                        <div class="submenu-container">
                            <div class="row g-1">
                                <div class="col-12">
                                    <a href="#sidebarPartenaire" class="submenu-header d-flex align-items-center justify-content-between rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center py-2 px-2">
                                            <div class="submenu-icon bg-info bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-buildings text-info"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Partenaires</h6>
                                                <small class="text-muted">Gestion des partenariats</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow me-2"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'detailsPartenaire listPartenaires addPartenaire' %}show{% endif %}" id="sidebarPartenaire">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mb-1 mx-2">
                                            <a href="{% url 't_formations:listPartenaires' %}" class="nav-link {% if request.resolver_match.url_name in 'detailsPartenaire listPartenaires' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Liste des partenaires</span>
                                            </a>
                                        </div>
                                        
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mx-2 mb-2">
                                            <a href="{% url 't_formations:addPartenaire' %}" class="nav-link {% if request.resolver_match.url_name == 'addPartenaire' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-plus-circle me-1"></i>
                                                <span>Nouveau partenaire</span>
                                            </a>
                                        </div>
                                        
                                    </div>
                                </div>

                                <div class="col-12 mt-2">
                                    <a href="#sidebarePromos" class="submenu-header d-flex align-items-center justify-content-between rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center py-2 px-2">
                                            <div class="submenu-icon bg-info bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-calendar text-info"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Promotions</h6>
                                                <small class="text-muted">Gestion des sessions</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow me-2"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'listPromos AddPromo' %}show{% endif %}" id="sidebarePromos">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mb-1 mx-2">
                                            <a href="{% url 't_formations:listPromos' %}" class="nav-link {% if request.resolver_match.url_name == 'listPromos' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Liste des promotions</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mb-1 mx-2">
                                            <a href="{% url 't_formations:AddPromo' %}" class="nav-link {% if request.resolver_match.url_name == 'AddPromo' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-plus-circle me-1"></i>
                                                <span>Nouvelle promotion</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-2">
                                    <a href="#sidebarFormationList" class="submenu-header d-flex align-items-center justify-content-between rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center py-2 px-2">
                                            <div class="submenu-icon bg-success bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-book text-success"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Formations</h6>
                                                <small class="text-muted">Catalogue de formations</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow me-2"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'listFormations addFormation detailFormation updateSpecialite' %}show{% endif %}" id="sidebarFormationList">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mb-1 mx-2">
                                            <a href="{% url 't_formations:listFormations' %}" class="nav-link {% if request.resolver_match.url_name == 'listFormations' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Catalogue</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mb-1 mx-2">
                                            <a href="{% url 't_formations:addFormation' %}" class="nav-link {% if request.resolver_match.url_name == 'addFormation' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-plus-circle me-1"></i>
                                                <span>Nouvelle formation</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-2">
                                    <a href="#sidebarSpecialite" class="submenu-header d-flex align-items-center justify-content-between rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center py-2 px-2">
                                            <div class="submenu-icon bg-warning bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-tag-alt text-warning"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Spécialités</h6>
                                                <small class="text-muted">Domaines d'expertise</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow me-2"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'detailSpecialite listSpecialites addSpecialite' %}show{% endif %}" id="sidebarSpecialite">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mb-1 mx-2">
                                            <a href="{% url 't_formations:listSpecialites' %}" class="nav-link {% if request.resolver_match.url_name == 'listSpecialites' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Liste des spécialités</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mb-1 mx-2">
                                            <a href="{% url 't_formations:addSpecialite' %}" class="nav-link {% if request.resolver_match.url_name == 'addSpecialite' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-plus-circle me-1"></i>
                                                <span>Nouvelle spécialité</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-2">
                                    <a href="#sideBarModules" class="submenu-header d-flex align-items-center justify-content-between rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center py-2 px-2">
                                            <div class="submenu-icon bg-secondary bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-cube text-secondary"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Modules</h6>
                                                <small class="text-muted">Composants pédagogiques</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow me-2"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in ' PageListeModules ' %}show{% endif %}" id="sideBarModules">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mb-1 mx-2">
                                            <a href="{% url 't_formations:PageListeModules' %}" class="nav-link {% if request.resolver_match.url_name == 'PageListeModules' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Liste des modules</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mb-1 mx-2">
                                            <a href="{% url 't_formations:archiveModule' %}" class="nav-link {% if request.resolver_match.url_name == 'archiveModule' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-archive me-1"></i>
                                                <span>Archives</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-2">
                                    <a href="#sidebarArchive" class="submenu-header d-flex align-items-center justify-content-between rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center py-2 px-2">
                                            <div class="submenu-icon bg-danger bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-archive text-danger"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Archives</h6>
                                                <small class="text-muted">Contenu archivé</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow me-2"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in ' archiveModule archiveFormation' %}show{% endif %}" id="sidebarArchive">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mb-1 mx-2">
                                            <a href="{% url 't_formations:archiveModule' %}" class="nav-link {% if request.resolver_match.url_name == 'archiveModule' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-cube me-1"></i>
                                                <span>Modules archivés</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 mx-2">
                                            <a href="{% url 't_formations:archiveFormation' %}" class="nav-link {% if request.resolver_match.url_name == 'archiveFormation' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-book me-1"></i>
                                                <span>Formations archivées</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <!-- Formation -->

                <!-- Ressources Humaines -->
                <li class="nav-item {% if request.resolver_match.url_name in 'updatePoste ListeDesPostes detailsCategorie ListeCategorieContrat ClausesTypeContrat listeTypeContrat nouveau_employe detailsEmploye liste_employes liste_articles_contrat liste_services' %}active{% endif %}">
                    <a class="nav-link menu-link rounded-2 mx-2 mb-1" href="#sidebarRh" data-bs-toggle="collapse" role="button" 
                    aria-expanded="{% if request.resolver_match.url_name in 'updatePoste ListeDesPostes detailsCategorie ListeCategorieContrat ClausesTypeContrat listeTypeContrat nouveau_employe detailsEmploye liste_employes liste_articles_contrat liste_services' %}true{% else %}false{% endif %}" aria-controls="sidebarRh">
                        <i class="bx bx-user-circle fs-5"></i><span class="ms-1">Ressources Humaines</span>
                    </a>
                    <div class="collapse menu-dropdown {% if request.resolver_match.url_name in 'updatePoste ListeDesPostes detailsCategorie ListeCategorieContrat ClausesTypeContrat listeTypeContrat nouveau_employe detailsEmploye liste_employes liste_articles_contrat liste_services' %}show{% endif %}" id="sidebarRh">
                        <div class="submenu-container">
                            <div class="row g-1">
                                <div class="col-12">
                                    <a href="#sidebareEmp" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-primary bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-group text-primary"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Gestion des Employés</h6>
                                                <small class="text-muted">Recrutement et suivi</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'nouveau_employe liste_employes detailsEmploye' %}show{% endif %}" id="sidebareEmp">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 't_rh:liste_employes' %}" class="nav-link {% if request.resolver_match.url_name == 'liste_employes' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Liste des employés</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                            <a href="{% url 't_rh:nouveau_employe' %}" class="nav-link {% if request.resolver_match.url_name == 'nouveau_employe' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-user-plus me-1"></i>
                                                <span>Nouvel employé</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-12 mt-2">
                                    <a href="#sidebarCtr" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-success bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-file text-success"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Gestion des Contrats</h6>
                                                <small class="text-muted">Documents et types</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1" id="sidebarCtr">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="#" class="nav-link d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Liste des contrats</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                            <a href="#" class="nav-link d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-plus-circle me-1"></i>
                                                <span>Nouveau contrat</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-2">
                                    <a href="#sidebarConfRh" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-warning bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-cog text-warning"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Configuration RH</h6>
                                                <small class="text-muted">Paramètres et structures</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'ListeDesPostes updatePoste detailsCategorie ListeCategorieContrat ClausesTypeContrat listeTypeContrat liste_articles_contrat liste_services' %}show{% endif %}" id="sidebarConfRh">
                                        <div class="submenu-section rounded-2 p-2">
                                            <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                                <a href="{% url 't_rh:ListeDesPostes' %}" class="nav-link {% if request.resolver_match.url_name in 'updatePoste ListeDesPostes' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                    <i class="bx bx-briefcase me-1"></i>
                                                    <span>Postes</span>
                                                </a>
                                            </div>
                                            <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                                <a href="{% url 't_rh:liste_services' %}" class="nav-link {% if request.resolver_match.url_name == 'liste_services' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                    <i class="bx bx-buildings me-1"></i>
                                                    <span>Services</span>
                                                </a>
                                            </div>
                                            <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                                <a href="{% url 't_rh:ListeCategorieContrat' %}" class="nav-link {% if request.resolver_match.url_name in 'ListeCategorieContrat detailsCategorie' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                    <i class="bx bx-category me-1"></i>
                                                    <span>Catégories de contrat</span>
                                                </a>
                                            </div>
                                            <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                                <a href="{% url 't_rh:liste_articles_contrat' %}" class="nav-link {% if request.resolver_match.url_name == 'liste_articles_contrat' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                    <i class="bx bx-file me-1"></i>
                                                    <span>Articles de contrat</span>
                                                </a>
                                            </div>
                                            <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                                <a href="{% url 't_rh:listeTypeContrat' %}" class="nav-link {% if request.resolver_match.url_name in 'listeTypeContrat ClausesTypeContrat' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                    <i class="bx bx-tag me-1"></i>
                                                    <span>Types de contrat</span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <!-- Ressources Humaines -->              

                <!-- Scolarité -->
                <li class="nav-item {% if request.resolver_match.url_name in 'AffectationPage StudentDetails AffectationAuGroupe ListeStudents listegroupes nouveaugroupe detailsgroupe' %}active{% endif %}">
                    <a class="nav-link menu-link rounded-2 mx-2 mb-1" href="#sidebarScolarite" data-bs-toggle="collapse" role="button" 
                        aria-expanded="{% if request.resolver_match.url_name in 'ListeStudents StudentDetails AffectationAuGroupe listegroupes nouveaugroupe detailsgroupe' %}true{% else %}false{% endif %}" 
                        aria-controls="sidebarScolarite">
                        <i class="bx bx-book-content fs-5"></i><span class="ms-1">Scolarité</span>
                    </a>
                    <div class="collapse menu-dropdown {% if request.resolver_match.url_name in 'AffectationPage StudentDetails AffectationAuGroupe ListeStudents listegroupes nouveaugroupe detailsgroupe' %}show{% endif %}" 
                        id="sidebarScolarite">
                        <div class="submenu-container">
                            <div class="row g-1">
                                <div class="col-12">
                                    <a href="#sidbareGroupe" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-primary bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-group text-primary"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Gestion des Groupes</h6>
                                                <small class="text-muted">Classes et affectations</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'listegroupes nouveaugroupe detailsgroupe' %}show{% endif %}" id="sidbareGroupe">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 't_groupe:listegroupes' %}" class="nav-link {% if request.resolver_match.url_name in 'listegroupes detailsgroupe' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Liste des groupes</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                            <a href="{% url 't_groupe:nouveaugroupe' %}" class="nav-link {% if request.resolver_match.url_name == 'nouveaugroupe' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-plus-circle me-1"></i>
                                                <span>Nouveau groupe</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-12 mt-2">
                                    <a href="#sidebaraffectation" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-info bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-transfer text-info"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Affectations</h6>
                                                <small class="text-muted">Répartition des étudiants</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1" id="sidebaraffectation">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                            <a href="{% url 't_groupe:AffectationPage' %}" class="nav-link {% if request.resolver_match.url_name in 'AffectationPage AffectationAuGroupe' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-time me-1"></i>
                                                <span>En attente d'affectation</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-2">
                                    <a href="#sidebarDocument" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-warning bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-file text-warning"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Gestion des Documents</h6>
                                                <small class="text-muted">Documents scolaires</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1" id="sidebarDocument">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="#sidebarContrat" class="submenu-header d-flex align-items-center justify-content-between rounded-2 p-2" data-bs-toggle="collapse">
                                                <div class="d-flex align-items-center">
                                                    <div class="submenu-icon bg-primary bg-opacity-10 rounded-circle p-1 me-2">
                                                        <i class="bx bx-file-text text-primary"></i>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0 fw-semibold">Contrat</h6>
                                                        <small class="text-muted">Modèles de contrat</small>
                                                    </div>
                                                </div>
                                                <i class="bx bx-chevron-down submenu-arrow"></i>
                                            </a>
                                            <div class="collapse submenu-content mt-1" id="sidebarContrat">
                                                <div class="submenu-item bg-light bg-opacity-50 rounded-2 mx-2 mb-1">
                                                    <a href="#" class="nav-link d-flex align-items-center py-1 px-2 rounded-2">
                                                        <i class="bx bx-file me-1"></i>
                                                        <span>Modéle de contrat</span>
                                                    </a>
                                                </div>
                                                <div class="submenu-item bg-light bg-opacity-50 rounded-2 mx-2 mb-1">
                                                    <a href="#" class="nav-link d-flex align-items-center py-1 px-2 rounded-2">
                                                        <i class="bx bx-plus-circle me-1"></i>
                                                        <span>Nouveau modéle</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-2">
                                    <a href="#sidebarStudent" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-success bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-user text-success"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Gestion des Étudiants</h6>
                                                <small class="text-muted">Inscriptions et dossiers</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'ListeStudents' %}show{% endif %}" id="sidebarStudent">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                            <a href="{% url 't_etudiants:ListeStudents' %}" class="nav-link {% if request.resolver_match.url_name in 'ListeStudents StudentDetails' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Liste des étudiants</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <!-- Scolarité -->

                <!-- Chargé de formation -->
                <li class="nav-item {% if request.resolver_match.url_name in 'CreateTimeTable PageFormateurs ListeDesEmploie timetable_edit ListeDesSalles ListeModelCrenau timetable_configure model_creneau_edit RegistrePage DetailsRegistrePresence DetailsListePresence' %}active{% endif %}">
                    <a class="nav-link menu-link rounded-2 mx-2 mb-1" href="#sidebarChargedeFormation" data-bs-toggle="collapse" role="button" 
                    aria-expanded="{% if request.resolver_match.url_name in 'CreateTimeTable PageFormateurs ListeDesEmploie timetable_edit ListeDesSalles ListeModelCrenau timetable_configure model_creneau_edit RegistrePage DetailsRegistrePresence DetailsListePresence' %}true{% else %}false{% endif %}"
                    aria-controls="sidebarChargedeFormation">
                        <i class="bx bx-calendar-edit fs-5"></i><span class="ms-1">Chargé de formation</span>
                    </a>
                    <div class="collapse menu-dropdown {% if request.resolver_match.url_name in 'CreateTimeTable PageFormateurs ListeDesEmploie timetable_edit ListeDesSalles ListeModelCrenau timetable_configure model_creneau_edit RegistrePage DetailsRegistrePresence DetailsListePresence' %}show{% endif %}" 
                        id="sidebarChargedeFormation">
                        <div class="submenu-container">
                            <div class="row g-1">
                                <!-- Emploi du temps submenu -->
                                <div class="col-12">
                                    <a href="#sidebarEmploiTemps" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-primary bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-calendar text-primary"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Emploi du temps</h6>
                                                <small class="text-muted">Gestion des horaires</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'ListeDesEmploie timetable_edit ListeDesSalles ListeModelCrenau timetable_configure model_creneau_edit' %}show{% endif %}" 
                                        id="sidebarEmploiTemps">
                                        <div class="row g-1">
                                            <div class="col-12">
                                                <div class="submenu-section rounded-2 p-2 mb-2">
                                                    <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                                        <a href="{% url 't_timetable:ListeDesEmploie' %}" class="nav-link {% if request.resolver_match.url_name in 'ListeDesEmploie timetable_configure timetable_edit' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                            <i class="bx bx-list-ul me-1"></i>
                                                            <span>Liste</span>
                                                        </a>
                                                    </div>
                                                    <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                                        <a href="{% url 't_timetable:CreateTimeTable' %}" class="nav-link {% if request.resolver_match.url_name == 'CreateTimeTable' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                            <i class="bx bx-plus-circle me-1"></i>
                                                            <span>Nouveau emploie du temps</span>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="col-12">
                                                <a href="#sidebarSalle" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                                    <div class="d-flex align-items-center">
                                                        <div class="submenu-icon bg-primary bg-opacity-10 rounded-circle p-1 me-2">
                                                            <i class="bx bx-door-open text-primary"></i>
                                                        </div>
                                                        <div>
                                                            <h6 class="mb-0 fw-semibold">Gestion des Salles</h6>
                                                            <small class="text-muted">Salles de cours</small>
                                                        </div>
                                                    </div>
                                                    <i class="bx bx-chevron-down submenu-arrow"></i>
                                                </a>
                                                <div class="collapse submenu-content mt-1" id="sidebarSalle">
                                                    <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                                        <a href="{% url 't_timetable:ListeDesSalles' %}" class="nav-link {% if request.resolver_match.url_name in 'ListeDesSalles' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                            <i class="bx bx-list-ul me-1"></i>
                                                            <span>Liste des salles</span>
                                                        </a>
                                                    </div>
                                                    <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                                        <a href="#" class="nav-link d-flex align-items-center py-1 px-2 rounded-2">
                                                            <i class="bx bx-plus-circle me-1"></i>
                                                            <span>Nouvelle salle</span>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="col-12 mt-2">
                                                <a href="#sidebarModeleCreneau" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                                    <div class="d-flex align-items-center">
                                                        <div class="submenu-icon bg-warning bg-opacity-10 rounded-circle p-1 me-2">
                                                            <i class="bx bx-time text-warning"></i>
                                                        </div>
                                                        <div>
                                                            <h6 class="mb-0 fw-semibold">Modéles de créneau</h6>
                                                            <small class="text-muted">Modèles d'horaires</small>
                                                        </div>
                                                    </div>
                                                    <i class="bx bx-chevron-down submenu-arrow"></i>
                                                </a>
                                                <div class="collapse submenu-content mt-1" id="sidebarModeleCreneau">
                                                    <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                                        <a href="{% url 't_timetable:ListeModelCrenau' %}" class="nav-link {% if request.resolver_match.url_name in 'ListeModelCrenau model_creneau_edit' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                            <i class="bx bx-list-ul me-1"></i>
                                                            <span>Modèles disponibles</span>
                                                        </a>
                                                    </div>
                                                    <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                                        <a href="#" class="nav-link d-flex align-items-center py-1 px-2 rounded-2">
                                                            <i class="bx bx-plus-circle me-1"></i>
                                                            <span>Nouveau modèle</span>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Formateurs submenu -->
                                <div class="col-12 mt-2">
                                    <a href="#sidebarFormateurs" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-warning bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-chalkboard text-warning"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Formateurs</h6>
                                                <small class="text-muted">Gestion des formateurs</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1" id="sidebarFormateurs">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 't_formations:PageFormateurs' %}" class="nav-link {% if request.resolver_match.url_name in 'PageFormateurs' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Liste des formateurs</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="#" class="nav-link d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-plus-circle me-1"></i>
                                                <span>Nouveau formateur</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="#" class="nav-link d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-file me-1"></i>
                                                <span>Contrats</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                            <a href="#" class="nav-link d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-transfer me-1"></i>
                                                <span>Affectation module</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Suivi des présences submenu -->
                                <div class="col-12 mt-2">
                                    <a href="#sidebarSuiviPresence" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-success bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-calendar-check text-success"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Suivi des présences</h6>
                                                <small class="text-muted">Gestion des présences</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'DetailsRegistrePresence RegistrePage DetailsListePresence' %}show{% endif %}" 
                                        id="sidebarSuiviPresence">
                                        <div class="row g-1">
                                            <div class="col-12">
                                                <a href="#sidebarRegistrePresence" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                                    <div class="d-flex align-items-center">
                                                        <div class="submenu-icon bg-primary bg-opacity-10 rounded-circle p-1 me-2">
                                                            <i class="bx bx-book text-primary"></i>
                                                        </div>
                                                        <div>
                                                            <h6 class="mb-0 fw-semibold">Registre</h6>
                                                            <small class="text-muted">Gestion des registres</small>
                                                        </div>
                                                    </div>
                                                    <i class="bx bx-chevron-down submenu-arrow"></i>
                                                </a>
                                                <div class="collapse submenu-content mt-1" id="sidebarRegistrePresence">
                                                    <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                                        <a href="{% url 't_etudiants:RegistrePage' %}" class="nav-link {% if request.resolver_match.url_name in 'RegistrePage DetailsRegistrePresence DetailsListePresence' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                            <i class="bx bx-list-ul me-1"></i>
                                                            <span>Liste des registres</span>
                                                        </a>
                                                    </div>
                                                    <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                                        <a href="{% url 't_etudiants:ListeStudents' %}" class="nav-link {% if request.resolver_match.url_name in 'ListeStudents' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                            <i class="bx bx-user me-1"></i>
                                                            <span>Liste des étudiants</span>
                                                        </a>
                                                    </div>
                                                    <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                                        <a href="#" class="nav-link d-flex align-items-center py-1 px-2 rounded-2">
                                                            <i class="bx bx-file me-1"></i>
                                                            <span>Rapport de présence</span>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <!-- Chargé de formation -->

                <!-- Examens -->
                <li class="nav-item {% if request.resolver_match.url_name in 'ModelBuilltinPage DetailsSession ListeSession' %}active{% endif %}">
                    <a class="nav-link menu-link rounded-2 mx-2 mb-1" href="#sidebarGesExam" data-bs-toggle="collapse" role="button" 
                    aria-expanded="{% if request.resolver_match.url_name in 'ModelBuilltinPage DetailsSession ListeSession' %}true{% else %}false{% endif %}" 
                    aria-controls="sidebarGesExam">
                        <i class="bx bx-file fs-5"></i><span class="ms-1">Évaluation</span>
                    </a>
                    <div class="collapse menu-dropdown {% if request.resolver_match.url_name in 'ModelBuilltinPage DetailsSession ListeSession' %}show{% endif %}" id="sidebarGesExam">
                        <div class="submenu-container">
                            <div class="row g-1">
                                <div class="col-12">
                                    <div class="submenu-section rounded-2 p-2 mb-2">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 't_exam:ListeSession' %}" class="nav-link {% if request.resolver_match.url_name in 'DetailsSession ListeSession' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-history me-1"></i>
                                                <span>Sessions d'examens</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 'institut_app:ListGroupePage' %}" class="nav-link d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-line-chart me-1"></i>
                                                <span>Résultats</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-12">
                                    <a href="#sideBarParamExam" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-warning bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-cog text-warning"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Paramètres</h6>
                                                <small class="text-muted">Configuration des examens</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'ModelBuilltinPage ' %}show{% endif %}" id="sideBarParamExam">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                            <a href="{% url 't_exam:ModelBuilltinPage' %}" class="nav-link {% if request.resolver_match.url_name == 'ModelBuilltinPage' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-file me-1"></i>
                                                <span>Modèles de PV</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <!-- Examens -->

                <!-- Finance -->
                <li class="nav-item {% if request.resolver_match.url_name in 'listeDesRembourssement DetailsEcheancierClient FinanceDashboard ListeDesPaiements PageRemboursement ListeRemise PageDetailsDemandePaiement attentes_de_paiements PageConfigPaiementSeuil liste_des_remises ListeModelEcheancier CreeEcheancier ListeEcheancierSpecial ListeEcheanciersConfigures SuivieEcheancier' %}active{% endif %}">
                    <a class="nav-link menu-link rounded-2 mx-2 mb-1" href="#sidebarFinance" data-bs-toggle="collapse" role="button" 
                    aria-expanded="{% if request.resolver_match.url_name in 'listeDesRembourssement DetailsEcheancierClient FinanceDashboard ListeDesPaiements PageRemboursement ListeRemise PageDetailsDemandePaiement attentes_de_paiements PageConfigPaiementSeuil liste_des_remises ListeModelEcheancier CreeEcheancier ListeEcheancierSpecial ListeEcheanciersConfigures SuivieEcheancier' %}true{% else %}false{% endif %}" 
                    aria-controls="sidebarFinance">
                        <i class='bx bx-money fs-5'></i> <span data-key="t-authentication" class="ms-1">Finance</span>
                    </a>
                    <div class="collapse menu-dropdown {% if request.resolver_match.url_name in 'listeDesRembourssement DetailsEcheancierClient FinanceDashboard ListeDesPaiements PageRemboursement ListeRemise PageDetailsDemandePaiement PageConfigPaiementSeuil attentes_de_paiements liste_des_remises ListeModelEcheancier CreeEcheancier ListeEcheancierSpecial ListeEcheanciersConfigures SuivieEcheancier' %}show{% endif %}" id="sidebarFinance">
                        <div class="submenu-container">
                            <div class="row g-1">
                                <div class="col-12">
                                    <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                        <a href="{% url 'institut_app:FinanceDashboard' %}" class="nav-link {% if request.resolver_match.url_name in 'FinanceDashboard' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                            <i class="bx bx-tachometer me-1"></i>
                                            <span>Tableau de bord financier</span>
                                        </a>
                                    </div>
                                    <a href="#sidebarTresorerie" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-success bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-wallet text-success"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Trésorerie</h6>
                                                <small class="text-muted">Gestion des paiements</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in ' ListeDesPaiements PageRemboursement ListeRemise PageDetailsDemandePaiement attentes_de_paiements liste_des_remises SuivieEcheancier' %}show{% endif %}" id="sidebarTresorerie">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 't_tresorerie:attentes_de_paiements' %}" class="nav-link {% if request.resolver_match.url_name in ' PageDetailsDemandePaiement attentes_de_paiements' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-time me-1"></i>
                                                <span>En attente de paiement</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 't_tresorerie:PageRemboursement' %}" class="nav-link {% if request.resolver_match.url_name in 'PageRemboursement' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-undo me-1"></i>
                                                <span>Remboursements</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 't_tresorerie:listeDesRembourssement' %}" class="nav-link {% if request.resolver_match.url_name in 'listeDesRembourssement' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Liste des rembourssements</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 't_tresorerie:SuivieEcheancier' %}" class="nav-link {% if request.resolver_match.url_name in 'DetailsEcheancierClient SuivieEcheancier' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-calendar-check me-1"></i>
                                                <span>Suivie des échéanciers</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                            <a href="{% url 't_tresorerie:ListeDesPaiements' %}" class="nav-link {% if request.resolver_match.url_name == 'ListeDesPaiements' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Tous les paiements</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-12 mt-2">
                                    <a href="#sidebarEcheanciers" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-info bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-calendar text-info"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Gestion des Échéanciers</h6>
                                                <small class="text-muted">Planification des paiements</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'ListeModelEcheancier CreeEcheancier ListeEcheancierSpecial ListeEcheanciersConfigures' %}show{% endif %}" id="sidebarEcheanciers">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1 mx-2">
                                            <a href="{% url 't_tresorerie:ListeModelEcheancier' %}" class="nav-link {% if request.resolver_match.url_name == 'ListeModelEcheancier' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-file me-1"></i>
                                                <span>Modèles</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1 mx-2">
                                            <a href="{% url 't_tresorerie:CreeEcheancier' %}" class="nav-link {% if request.resolver_match.url_name == 'CreeEcheancier' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-plus-circle me-1"></i>
                                                <span>Créer un échéancier</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1 mx-2">
                                            <a href="{% url 't_tresorerie:ListeEcheancierSpecial' %}" class="nav-link {% if request.resolver_match.url_name == 'ListeEcheancierSpecial' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-star me-1"></i>
                                                <span>Échéancier spécial</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mx-2">
                                            <a href="{% url 't_tresorerie:ListeEcheanciersConfigures' %}" class="nav-link {% if request.resolver_match.url_name == 'ListeEcheanciersConfigures' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-check me-1"></i>
                                                <span>Échéanciers configurés</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-12 mt-2">
                                    <a href="#sidbareParam" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-warning bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-cog text-warning"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Paramètres Financiers</h6>
                                                <small class="text-muted">Configuration des seuils</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'PageConfigPaiementSeuil ListeRemise' %}show{% endif %}" id="sidbareParam">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 't_tresorerie:PageConfigPaiementSeuil' %}" class="nav-link {% if request.resolver_match.url_name == 'PageConfigPaiementSeuil' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-slider me-1"></i>
                                                <span>Seuils de paiement</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 't_remise:ListeRemise' %}" class="nav-link {% if request.resolver_match.url_name == 'ListeRemise' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="fas fa-percent me-1"></i>
                                                <span>Gestion des remises</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <!-- Finance -->

                <!-- Conseil -->
                <li class="nav-item {% if request.resolver_match.url_name in 'ListeDesDevis prospectInstance ListeThematique AddNewDevis' %}active{% endif %}">
                    <a class="nav-link menu-link rounded-2 mx-2 mb-1" href="#sidebarConseil" data-bs-toggle="collapse" role="button" 
                    aria-expanded="{% if request.resolver_match.url_name in 'ListeDesDevis prospectInstance ListeThematique AddNewDevis' %}true{% else %}false{% endif %}" 
                    aria-controls="sidebarConseil">
                        <i class='bx bx-briefcase-alt-2 fs-5'></i> <span data-key="t-authentication" class="ms-1">Conseil</span>
                    </a>
                    <div class="collapse menu-dropdown {% if request.resolver_match.url_name in 'ListeDesDevis AddNewDevis prospectInstance ListeThematique ArchiveThematique' %}show{% endif %}" id="sidebarConseil">
                        <div class="submenu-container">
                            <div class="row g-1">
                                <div class="col-12">
                                    <a href="#sidebarThematique" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-primary bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-book-content text-primary"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Formations Conseil</h6>
                                                <small class="text-muted">Catalogue de formations</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'ArchiveThematique ListeThematique ' %}show{% endif %}" id="sidebarThematique">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 't_conseil:ListeThematique' %}" class="nav-link {% if request.resolver_match.url_name in 'ListeThematique' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Liste des thématiques</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                            <a href="{% url 't_conseil:ArchiveThematique' %}" class="nav-link {% if request.resolver_match.url_name in 'ArchiveThematique' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-archive me-1"></i>
                                                <span>Archives</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-12 mt-2">
                                    <a href="#sidebarGestionClients" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-warning bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-group text-warning"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Gestion des Clients</h6>
                                                <small class="text-muted">Prospects et clients</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'prospectInstance' %}show{% endif %}" id="sidebarGestionClients">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 't_conseil:prospectInstance' %}" class="nav-link {% if request.resolver_match.url_name in 'prospectInstance' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-user-plus me-1"></i>
                                                <span>Prospects</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                            <a href="#" class="nav-link d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-user-check me-1"></i>
                                                <span>Clients</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-2">
                                    <a href="#sidebarDevis" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-success bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-file text-success"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Devis</h6>
                                                <small class="text-muted">Gestion commerciale</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'AddNewDevis   ' %}show{% endif %}" id="sidebarDevis">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 't_conseil:AddNewDevis' %}" class="nav-link {% if request.resolver_match.url_name in 'AddNewDevis' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-plus-circle me-1"></i>
                                                <span>Nouveau devis</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                            <a href="{% url 't_conseil:ListeDesDevis' %}" class="nav-link {% if request.resolver_match.url_name in 'ListeDesDevis' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Liste des devis</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-2">
                                    <a href="#sidebarFacture" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-info bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-receipt text-info"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Factures</h6>
                                                <small class="text-muted">Gestion de la facturation</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in '   ' %}show{% endif %}" id="sidebarFacture">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="" class="nav-link {% if request.resolver_match.url_name in ' ' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-plus-circle me-1"></i>
                                                <span>Nouvelle facture</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="" class="nav-link {% if request.resolver_match.url_name in '' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Liste des factures</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                            <a href="#" class="nav-link d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Tous les paiements</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <!-- Conseil -->

                <!-- Entreprise -->
                <li class="nav-item {% if request.resolver_match.url_name in 'liste_entreprise new_entreprise details_entreprise' %}active{% endif %}">
                    <a class="nav-link menu-link rounded-2 mx-2 mb-1" href="#sidebarEntreprise" data-bs-toggle="collapse" role="button" 
                    aria-expanded="{% if request.resolver_match.url_name in 'liste_entreprise new_entreprise details_entreprise' %}true{% else %}false{% endif %}" 
                    aria-controls="sidebarEntreprise">
                     <i class='bx bxs-business fs-5'></i> <span data-key="t-authentication" class="ms-1">Entreprise</span>
                    </a>
                    <div class="collapse menu-dropdown {% if request.resolver_match.url_name in 'liste_entreprise new_entreprise details_entreprise' %}show{% endif %}" id="sidebarEntreprise">
                        <div class="submenu-container">
                            <div class="row g-1">
                                <div class="col-12">
                                    <a href="#sidebarTresorerie" class="submenu-header d-flex align-items-center justify-content-between p-2 rounded-2" data-bs-toggle="collapse">
                                        <div class="d-flex align-items-center">
                                            <div class="submenu-icon bg-primary bg-opacity-10 rounded-circle p-1 me-2">
                                                <i class="bx bx-building text-primary"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-0 fw-semibold">Entités Légales</h6>
                                                <small class="text-muted">Structures de l'entreprise</small>
                                            </div>
                                        </div>
                                        <i class="bx bx-chevron-down submenu-arrow"></i>
                                    </a>
                                    <div class="collapse submenu-content mt-1 {% if request.resolver_match.url_name in 'liste_entreprise new_entreprise details_entreprise' %}show{% endif %}" id="sidebarTresorerie">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 'institut_app:liste_entreprise' %}" class="nav-link {% if request.resolver_match.url_name == 'liste_entreprise' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-list-ul me-1"></i>
                                                <span>Toutes les entités</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                            <a href="{% url 'institut_app:new_entreprise' %}" class="nav-link {% if request.resolver_match.url_name == 'new_entreprise' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-plus-circle me-1"></i>
                                                <span>Nouvelle entité</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <!-- Entreprise -->

                <!-- Administration -->
                <li class="nav-item {% if request.resolver_match.url_name in 'PageUpdateUserDetails ListGroupePage UsersListePage' %}active{% endif %}">
                    <a class="nav-link menu-link rounded-2 mx-2 mb-1" href="#sidebarAdmin" data-bs-toggle="collapse" role="button" 
                    aria-expanded="{% if request.resolver_match.url_name in 'PageUpdateUserDetails ListGroupePage UsersListePage' %}true{% else %}false{% endif %}" 
                    aria-controls="sidebarAdmin">
                        <i class="bx bx-cog fs-5"></i> <span data-key="t-authentication" class="ms-1">Administration</span>
                    </a>
                    <div class="collapse menu-dropdown {% if request.resolver_match.url_name in 'PageUpdateUserDetails ListGroupePage UsersListePage' %}show{% endif %}" id="sidebarAdmin">
                        <div class="submenu-container">
                            <div class="row g-1">
                                <div class="col-12">
                                    <div class="submenu-section rounded-2 p-2">
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 'institut_app:UsersListePage' %}" class="nav-link {% if request.resolver_match.url_name in 'PageUpdateUserDetails UsersListePage' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-user me-1"></i>
                                                <span>Gestion des utilisateurs</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1 mb-1">
                                            <a href="{% url 'institut_app:ListGroupePage' %}" class="nav-link {% if request.resolver_match.url_name == 'ListGroupePage' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-group me-1"></i>
                                                <span>Groupes d'utilisateurs</span>
                                            </a>
                                        </div>
                                        <div class="submenu-item bg-light bg-opacity-50 rounded-2 p-1">
                                            <a href="{% url 'institut_app:new_entreprise' %}" class="nav-link {% if request.resolver_match.url_name == 'new_entreprise' %}active{% endif %} d-flex align-items-center py-1 px-2 rounded-2">
                                                <i class="bx bx-shield-quarter me-1"></i>
                                                <span>Droits d'accès</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <!-- Administration -->
            </ul>
        </div>
        <!-- Sidebar -->
    </div>

    <div class="sidebar-background"></div>
</div>

<script>
// JavaScript to maintain active state in menu and handle submenu expansion
document.addEventListener('DOMContentLoaded', function() {
    // Get all nav-links in the menu that are not collapse toggles
    const navLinks = document.querySelectorAll('.navbar-nav .nav-link:not([data-bs-toggle])');
    
    // Add click event to each nav link to ensure active state
    navLinks.forEach(function(link) {
        link.addEventListener('click', function(e) {
            // Only handle actual navigation links, not collapse toggles
            if (!this.href || this.href.startsWith('#')) {
                return;
            }
            
            // Wait for the page to load with the new URL, then update active states based on server-side Django logic
            // The Django template will set the correct active classes on page load
        });
    });
    
    // Handle collapse events to maintain active states
    document.querySelectorAll('.navbar-nav [data-bs-toggle="collapse"]').forEach(function(collapseEl) {
        collapseEl.addEventListener('click', function() {
            // Remove active from siblings
            const siblings = Array.from(this.closest('ul').children);
            siblings.forEach(function(sibling) {
                if (sibling !== this.closest('li')) {
                    sibling.classList.remove('active');
                }
            }, this);
        });
    });
    
    // Additional JavaScript to ensure parent menus stay expanded when child items are active
    document.querySelectorAll('.navbar-nav .nav-link.active').forEach(function(activeLink) {
        // Find parent submenu and ensure it's shown
        const submenuItem = activeLink.closest('.submenu-content');
        if (submenuItem) {
            submenuItem.classList.add('show');
            // Also ensure parent collapse sections are shown
            const parentCollapse = submenuItem.closest('.collapse');
            if (parentCollapse) {
                parentCollapse.classList.add('show');
                // Add active to parent nav-item
                const parentNavItem = parentCollapse.parentElement.closest('.nav-item');
                if (parentNavItem) {
                    parentNavItem.classList.add('active');
                }
            }
        }
    });
});
</script>