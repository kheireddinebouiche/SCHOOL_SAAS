{% extends 'tenant_folder/base.html' %}
{% load static %}
{% block title %} Mon profile {% endblock title %}

{% block content %}
<style>
:root {
  --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  --accent-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
  --dark-bg: #1a1a2e;
  --card-bg: #ffffff;
  --text-primary: #2d3748;
  --text-secondary: #718096;
  --border-radius-xl: 24px;
  --border-radius-lg: 16px;
  --border-radius-md: 12px;
  --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
}

.dark-theme {
  --dark-bg: #0f172a;
  --card-bg: #1e293b;
  --text-primary: #f1f5f9;
  --text-secondary: #94a3b8;
}

.profile-container {
  background: var(--dark-bg);
  border-radius: var(--border-radius-xl);
  padding: 2.5rem;
  color: white;
  position: relative;
  overflow: hidden;
  box-shadow: var(--shadow-xl);
  margin-bottom: 2rem;
}

.profile-container::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--primary-gradient);
}

.modern-card {
  background: var(--card-bg);
  border-radius: var(--border-radius-lg);
  box-shadow: var(--shadow-lg);
  border: none;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  color: var(--text-primary);
}

.modern-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
}

.gradient-badge {
  background: var(--primary-gradient);
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 500;
}

.avatar-container {
  position: relative;
  display: inline-block;
}

.avatar-xl {
  width: 160px;
  height: 160px;
  border: 6px solid rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  object-fit: cover;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
}

.avatar-xl:hover {
  transform: scale(1.05);
  border-color: rgba(255, 255, 255, 0.4);
}

.status-indicator-modern {
  position: absolute;
  bottom: 10px;
  right: 10px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--accent-gradient);
  border: 3px solid var(--dark-bg);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.modern-tabs .nav-link {
  color: var(--text-secondary);
  font-weight: 600;
  padding: 1.25rem 2rem;
  border: none;
  border-radius: var(--border-radius-md);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.modern-tabs .nav-link::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--primary-gradient);
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: -1;
}

.modern-tabs .nav-link:hover:not(.active) {
  color: var(--primary-gradient);
  background: rgba(102, 126, 234, 0.1);
}

.modern-tabs .nav-link.active {
  color: white;
  background: var(--primary-gradient);
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
}

.stat-card-modern {
  text-align: center;
  padding: 2rem;
  border-radius: var(--border-radius-md);
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.dark-theme .stat-card-modern {
  background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.stat-card-modern::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  height: 100%;
  background: var(--primary-gradient);
}

.skill-tag {
  display: inline-block;
  padding: 0.5rem 1.25rem;
  margin: 0.25rem;
  border-radius: 30px;
  font-weight: 500;
  font-size: 0.9rem;
  transition: all 0.3s ease;
  background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
  color: #0369a1;
  border: 1px solid rgba(3, 105, 161, 0.1);
}

.dark-theme .skill-tag {
  background: linear-gradient(135deg, #0c4a6e 0%, #082f49 100%);
  color: #38bdf8;
  border: 1px solid rgba(56, 189, 248, 0.2);
}

.skill-tag:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}

.activity-timeline-modern {
  position: relative;
  padding-left: 2rem;
}

.activity-timeline-modern::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 2px;
  background: linear-gradient(to bottom, #667eea, #764ba2);
}

.timeline-item {
  position: relative;
  margin-bottom: 2rem;
  padding-left: 2rem;
}

.timeline-item::before {
  content: "";
  position: absolute;
  left: -0.5rem;
  top: 0;
  width: 1rem;
  height: 1rem;
  border-radius: 50%;
  background: var(--primary-gradient);
  border: 3px solid white;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.timeline-item:last-child {
  margin-bottom: 0;
}

.action-btn-modern {
  background: var(--primary-gradient);
  border: none;
  padding: 0.875rem 1.75rem;
  border-radius: var(--border-radius-md);
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
}

.action-btn-modern:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 25px rgba(102, 126, 234, 0.4);
}

.info-table th {
  color: var(--text-secondary);
  font-weight: 500;
  width: 30%;
}

.info-table td {
  color: var(--text-primary);
  font-weight: 400;
}

@media (max-width: 768px) {
  .profile-container {
    padding: 1.5rem;
  }
  
  .avatar-xl {
    width: 120px;
    height: 120px;
  }
  
  .modern-tabs .nav-link {
    padding: 1rem;
    font-size: 0.95rem;
  }
  
  .stat-card-modern {
    padding: 1.5rem;
  }
}
</style>

<div class="main-content">
    <div class="page-content">
        <div class="container-fluid">
            <!-- Modern Profile Container -->
            <div class="profile-container">
                <div class="row align-items-center">
                    <div class="col-lg-3 text-center mb-5 mb-lg-0">
                        <div class="avatar-container">
                            {% if request.user.profile.image %}
                                <img src="{{ request.user.profile.image.url }}" alt="user-img" class="avatar-xl" />
                            {% else %}
                                <img src="{% static 'design/assets/images/users/avatar-1.jpg' %}" alt="user-img" class="avatar-xl" />
                            {% endif %}
                            <span class="status-indicator-modern"></span>
                        </div>
                    </div>
                    <div class="col-lg-9">
                        <div class="ms-lg-5">
                            <div class="d-flex align-items-center mb-3">
                                <h1 class="display-4 fw-bold mb-0 me-3">{{request.user.username}}</h1>
                                <span class="gradient-badge">PRO</span>
                            </div>
                            <p class="lead text-white-50 mb-4">Owner & Founder</p>
                            <div class="row g-4 mb-4">
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center">
                                        <div class="avatar-sm bg-white bg-opacity-10 rounded-circle me-3">
                                            <i class="ri-map-pin-user-line fs-4"></i>
                                        </div>
                                        <div>
                                            <small class="text-white-50 d-block">LOCATION</small>
                                            <span class="h6 mb-0 text-white">California, United States</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center">
                                        <div class="avatar-sm bg-white bg-opacity-10 rounded-circle me-3">
                                            <i class="ri-building-line fs-4"></i>
                                        </div>
                                        <div>
                                            <small class="text-white-50 d-block">COMPANY</small>
                                            <span class="h6 mb-0 text-white">Themesbrand</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex flex-wrap gap-3">
                                <a href="{% url 'institut_app:UpdateProfile' %}" class="action-btn-modern">
                                    <i class="ri-edit-box-line align-bottom me-2"></i> Modifier mes informations
                                </a>
                                <button type="button" class="btn btn-outline-light">
                                    <i class="ri-mail-line align-bottom me-2"></i> Envoyer un message
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-12">
                    <!-- Modern Tab Navigation -->
                    <ul class="nav nav-tabs modern-tabs mb-4" role="tablist">
                        <li class="nav-item me-3">
                            <a class="nav-link active" data-bs-toggle="tab" href="#overview-tab" role="tab">
                                <i class="ri-user-line me-2 align-middle"></i> Overview
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#activities" role="tab">
                                <i class="ri-shield-keyhole-line me-2 align-middle"></i> Droits d'accès
                            </a>
                        </li>
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div class="tab-pane active" id="overview-tab" role="tabpanel">
                            <div class="row">
                                <div class="col-xxl-8">
                                    <div class="modern-card mb-4">
                                        <div class="card-body">
                                            <h3 class="card-title mb-4">Informations personnelles</h3>
                                            <div class="table-responsive">
                                                <table class="table table-borderless mb-0 info-table">
                                                    <tbody>
                                                        <tr>
                                                            <th class="ps-0" scope="row">Nom & Prénom :</th>
                                                            {% if request.user.first_name and request.user.last_name %}
                                                                <td class="text-muted">{{request.user.first_name}} {{request.user.last_name}}</td>
                                                            {% else %}
                                                                <td class="text-muted">Aucune information enregistrée !</td>
                                                            {% endif %}
                                                        </tr>
                                                        <tr>
                                                            <th class="ps-0" scope="row">Mobile :</th>
                                                            <td class="text-muted">+(1) 987 6543</td>
                                                        </tr>
                                                        <tr>
                                                            <th class="ps-0" scope="row">E-mail :</th>
                                                            <td class="text-muted">{{request.user.email}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th class="ps-0" scope="row">Location :</th>
                                                            <td class="text-muted">California, United States</td>
                                                        </tr>
                                                        <tr>
                                                            <th class="ps-0" scope="row">Date d'inscription :</th>
                                                            <td class="text-muted">24 Nov 2021</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-xxl-4">
                                    <div class="modern-card mb-4">
                                        <div class="card-body">
                                            <h3 class="card-title mb-4">Statistiques</h3>
                                            <div class="d-grid gap-4">
                                                <div class="stat-card-modern">
                                                    <div class="display-5 fw-bold text-primary mb-2">12</div>
                                                    <div class="text-muted">Projets</div>
                                                </div>
                                                <div class="stat-card-modern">
                                                    <div class="display-5 fw-bold text-success mb-2">48</div>
                                                    <div class="text-muted">Tâches</div>
                                                </div>
                                                <div class="stat-card-modern">
                                                    <div class="display-5 fw-bold text-info mb-2">87%</div>
                                                    <div class="text-muted">Accomplissement</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="modern-card">
                                        <div class="card-body">
                                            <h3 class="card-title mb-4">Compétences</h3>
                                            <div class="d-flex flex-wrap">
                                                <span class="skill-tag">UI/UX Design</span>
                                                <span class="skill-tag">Frontend</span>
                                                <span class="skill-tag">JavaScript</span>
                                                <span class="skill-tag">React</span>
                                                <span class="skill-tag">Node.js</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tab-pane fade" id="activities" role="tabpanel">
                            <div class="modern-card">
                                <div class="card-body">
                                    <h3 class="card-title mb-4">Activités récentes</h3>
                                    <div class="activity-timeline-modern">
                                        <div class="timeline-item">
                                            <h5 class="mb-2">Oliver Phillips <span class="gradient-badge">New</span></h5>
                                            <p class="text-muted mb-2">We talked about a project on linkedin.</p>
                                            <small class="text-muted">Today</small>
                                        </div>
                                        
                                        <div class="timeline-item">
                                            <h5 class="mb-2">Nancy Martino <span class="badge bg-warning-subtle text-warning">In Progress</span></h5>
                                            <p class="text-muted mb-2"><i class="ri-file-text-line align-middle me-1"></i> Create new project Buildng product</p>
                                            <div class="avatar-group mb-2">
                                                <a href="javascript: void(0);" class="avatar-group-item" data-bs-toggle="tooltip" data-bs-placement="top" title="Christi">
                                                    <img src="assets/images/users/avatar-4.jpg" alt="" class="rounded-circle avatar-xs" />
                                                </a>
                                                <a href="javascript: void(0);" class="avatar-group-item" data-bs-toggle="tooltip" data-bs-placement="top" title="Frank Hook">
                                                    <img src="assets/images/users/avatar-3.jpg" alt="" class="rounded-circle avatar-xs" />
                                                </a>
                                                <a href="javascript: void(0);" class="avatar-group-item" data-bs-toggle="tooltip" data-bs-placement="top" title="Ruby">
                                                    <div class="avatar-xs">
                                                        <div class="avatar-title rounded-circle bg-light text-primary">
                                                            R
                                                        </div>
                                                    </div>
                                                </a>
                                            </div>
                                            <small class="text-muted">Yesterday</small>
                                        </div>
                                        
                                        <div class="timeline-item">
                                            <h5 class="mb-2">Natasha Carey <span class="badge bg-success-subtle text-success">Completed</span></h5>
                                            <p class="text-muted mb-2">Adding a new event with attachments</p>
                                            <div class="row">
                                                <div class="col-md-8">
                                                    <div class="row gx-2 mb-2">
                                                        <div class="col-4">
                                                            <img src="assets/images/small/img-2.jpg" alt="" class="img-fluid rounded" />
                                                        </div>
                                                        <div class="col-4">
                                                            <img src="assets/images/small/img-3.jpg" alt="" class="img-fluid rounded" />
                                                        </div>
                                                        <div class="col-4">
                                                            <img src="assets/images/small/img-4.jpg" alt="" class="img-fluid rounded" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <small class="text-muted">25 Nov</small>
                                        </div>
                                        
                                        <div class="timeline-item">
                                            <h5 class="mb-2">Bethany Johnson</h5>
                                            <p class="text-muted mb-2">added a new member to velzon dashboard</p>
                                            <small class="text-muted">19 Nov</small>
                                        </div>
                                    </div>
                                    
                                    <div class="text-center mt-5">
                                        <button class="btn btn-primary rounded-pill px-4 py-2">
                                            <i class="ri-refresh-line me-2"></i>Voir plus d'activités
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock content %}